import"../chunks/CWj6FrbW.js";import"../chunks/Cv8X04vp.js";import{ap as Lt,V as ht,p as At,a9 as zt,aa as N,ab as St,k as S,l as $t,t as I,o as i,ad as B,g as t,m as w,n as kt,Q as h,h as lt,s as n,u as x,w as z,T as d,v as a,af as Yt,a8 as Mt,ac as jt,a0 as Bt}from"../chunks/BA_dKbwA.js";import{p as G,i as dt,s as Dt,a as ct}from"../chunks/BYHWiXdF.js";import{e as vt,b as Et,d as Vt,f as It,r as qt,i as ut,p as Ht,s as Ut,g as Ot}from"../chunks/DmPJ4Yyj.js";import{i as Ct}from"../chunks/CDPpAZW9.js";import{s as Pt,g as Xt}from"../chunks/CTKGYYx6.js";const Gt=!1,_e=Object.freeze(Object.defineProperty({__proto__:null,ssr:Gt},Symbol.toStringTag,{value:"Module"}));function Qt(){const m=Lt([]),{subscribe:_,update:D}=m;return{subscribe:_,isTimeSlotAvailable:(u,y)=>{const s=ht(m);return console.log("Checking availability for:",u,y,s),!s.some($=>$.date===u&&$.time===y)},add:u=>{const y=ht(m);if(console.log("Adding appointment:",u,"Current appointments:",y),!y.some(s=>s.date===u.date&&s.time===u.time)){const s={...u,id:crypto.randomUUID()};return D($=>[...$,s]),console.log("Added appointment:",s),!0}return!1},remove:u=>{ht(m),D(y=>y.filter(s=>s.id!==u))},getByDate:u=>{const s=ht(m).filter($=>$.date===u);return console.log("Getting appointments for date:",u,s),s}}}const Q=Qt();var Rt=S('<div class="flex items-center justify-between px-3 py-2 rounded-lg bg-[#142833]/50 hover:bg-[#1A3240] transition group"><div class="flex items-center gap-3"><span class="text-pirate-parchment font-medium"> </span> <span class="text-pirate-parchment font-medium tracking-wide text-base"> </span></div> <button class="rounded-lg p-1.5 bg-[#1A3240] hover:bg-red-900/80 text-pirate-parchment transition opacity-0 group-hover:opacity-100 hover:text-red-100"><svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></button></div>'),Wt=S('<div class="space-y-2"></div>'),Jt=S('<div class="text-center text-pirate-gold py-4 text-lg">Your Lame is completely free today</div>'),Kt=S('<div class="p-2 rounded bg-red-900/20 border border-red-900/30 text-red-300 text-sm"> </div>'),Zt=S("<option> </option>"),te=S('<div class="fixed inset-0 bg-black/60 backdrop-blur-[2px] z-40" aria-hidden="true"></div>'),ee=S(`<aside class="fixed right-0 top-0 h-full w-full sm:w-[420px] max-w-full z-50 transform transition-transform duration-300
         bg-[#091E26] border-l border-[#1C2F3A] flex flex-col shadow-2xl shadow-black/50" aria-modal="true" role="dialog" aria-labelledby="drawer-title"><div class="p-4 border-b border-[#1C2F3A] flex items-center justify-between"><h1 id="drawer-title" class="text-lg font-bold text-pirate-gold tracking-wide gothic-font"> </h1> <button class="rounded-lg p-2 bg-[#1C2F3A] hover:bg-[#2A3F4D] text-pirate-parchment transition" aria-label="Close drawer">✕</button></div> <div class="flex-1 overflow-auto"><div class="p-4 border-b border-[#1C2F3A]"><h2 class="text-lg font-bold text-pirate-gold mb-4 gothic-font">Existing Lame Appointments</h2> <!></div> <div class="p-4"><h2 class="text-lg font-bold text-pirate-gold mb-4 gothic-font">Make a New Lame Appointment</h2> <form id="appointmentForm" class="space-y-4"><!> <div><label class="block text-sm font-medium text-pirate-gold" for="visitorName">Visitor Name</label> <input id="visitorName" class="mt-1 block w-full rounded-xl border border-white/10 bg-black/25 text-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-pirate-gold/60" required placeholder="Enter visitor's name"/></div> <div><label class="block text-sm font-medium text-pirate-gold" for="time">Time</label> <div class="relative"><select id="time" class="mt-1 block w-full rounded-xl border border-white/10 bg-black/25 text-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-pirate-gold/60 appearance-none pr-8" style="color-scheme: dark" required><option disabled>Select a time slot</option><!></select> <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-white/50"><svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></div></div></div></form> <div class="p-4 border-t border-[#1C2F3A] mt-auto"><button type="submit" form="appointmentForm" class="w-full rounded-lg px-3 py-2 bg-pirate-gold/90 hover:bg-pirate-gold text-[#1B2A34] transition shadow-lg shadow-black/30 ring-1 ring-black/40 focus:outline-none focus:ring-2 focus:ring-pirate-gold/60 focus:ring-offset-2 focus:ring-offset-[#06131A]">Save Appointment</button></div></div></div></aside> <!>`,1);function ae(m,_){At(_,!1);const D=()=>ct(Q,"$appointments",u),[u,y]=Dt(),s=h();let $=G(_,"open",8,!1),g=G(_,"selectedDate",8,null);const p=zt();let c=h(""),A=h(""),C=h("");function E(){p("close")}function T(){if(!t(c)||!t(A)||!g())return;const r=`${g().getFullYear()}-${String(g().getMonth()+1).padStart(2,"0")}-${String(g().getDate()).padStart(2,"0")}`;if(!Q.isTimeSlotAvailable(r,t(A))){d(C,"Your Lame is busy at that time");return}d(C,""),p("save",{visitorName:t(c),time:t(A)}),d(c,""),d(A,""),E()}N(()=>t(A),()=>{t(A)&&d(C,"")}),N(()=>(lt(g()),D()),()=>{d(s,g()?D().filter(r=>{const l=`${g().getFullYear()}-${String(g().getMonth()+1).padStart(2,"0")}-${String(g().getDate()).padStart(2,"0")}`;return r.date===l}).sort((r,l)=>r.time.localeCompare(l.time)):[])}),St(),Ct();var Y=ee(),M=$t(Y);let k;var v=i(M),f=i(v),U=i(f,!0);a(f);var R=n(f,2);a(v);var W=n(v,2),O=i(W),xt=n(i(O),2);{var _t=r=>{var l=Wt();vt(l,5,()=>t(s),ut,(L,F)=>{var j=Rt(),q=i(j),H=i(q),X=i(H,!0);a(H);var bt=n(H,2),e=i(bt);a(bt),a(q);var o=n(q,2);a(j),I(b=>{z(X,(t(F),x(()=>t(F).visitorName))),z(e,`• ${t(F),x(()=>t(F).time)??""} - ${b??""}`)},[()=>(t(F),x(()=>`${((parseInt(t(F).time.split(":")[0])+1)%24).toString().padStart(2,"0")}:00`))]),B("click",o,()=>{confirm(`Are you sure you want to remove ${t(F).visitorName}'s appointment?`)&&Q.remove(t(F).id)}),w(L,j)}),a(l),w(r,l)},yt=r=>{var l=Jt();w(r,l)};dt(xt,r=>{t(s),x(()=>t(s).length>0)?r(_t):r(yt,!1)})}a(O);var pt=n(O,2),J=n(i(pt),2),K=i(J);{var at=r=>{var l=Kt(),L=i(l,!0);a(l),I(()=>z(L,t(C))),w(r,l)};dt(K,r=>{t(C)&&r(at)})}var P=n(K,2),gt=n(i(P),2);qt(gt),a(P);var rt=n(P,2),mt=n(i(rt),2),Z=i(mt);I(()=>{t(A),Yt(()=>{})});var tt=i(Z);tt.value=tt.__value="";var ot=n(tt);vt(ot,0,()=>x(()=>Array.from({length:24},(r,l)=>l)),ut,(r,l)=>{var L=Zt(),F=i(L);a(L);var j={};I((q,H,X)=>{z(F,`${q??""}:00 - ${H??""}:00`),j!==(j=X)&&(L.value=(L.__value=X)??"")},[()=>x(()=>l.toString().padStart(2,"0")),()=>x(()=>((l+1)%24).toString().padStart(2,"0")),()=>x(()=>`${l.toString().padStart(2,"0")}:00`)]),w(r,L)}),a(Z),Mt(2),a(mt),a(rt),a(J),Mt(2),a(pt),a(W),a(M);var ft=n(M,2);{var it=r=>{var l=te();B("click",l,E),w(r,l)};dt(ft,r=>{$()&&r(it)})}I((r,l)=>{k=It(M,"",k,r),z(U,l)},[()=>({transform:$()?"translateX(0)":"translateX(100%)"}),()=>(lt(g()),x(()=>{var r;return((r=g())==null?void 0:r.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}))||""}))]),B("click",R,E),Et(gt,()=>t(c),r=>d(c,r)),Vt(Z,()=>t(A),r=>d(A,r)),B("submit",J,Ht(T)),w(m,Y),kt(),y()}var re=S('<div class="flex items-center gap-0.5 mt-0.5"><div class="w-0.5 h-0.5 rounded-full bg-pirate-gold flex-shrink-0"></div> <div class="truncate text-[0.65rem] text-pirate-parchment/90"> </div></div>'),oe=S('<button tabindex="0"><span class="text-sm font-medium"> </span> <!></button>');function ie(m,_){At(_,!1);const D=()=>ct(Q,"$appointments",u),[u,y]=Dt(),s=h(),$=h();let g=G(_,"day",8),p=G(_,"year",8),c=G(_,"month",8),A=G(_,"isToday",8),C=G(_,"onClick",8);function E(v){return`${v.getFullYear()}-${String(v.getMonth()+1).padStart(2,"0")}-${String(v.getDate()).padStart(2,"0")}`}N(()=>(lt(p()),lt(c()),lt(g())),()=>{d(s,E(new Date(p(),c(),g())))}),N(()=>(D(),t(s)),()=>{d($,D().filter(v=>v.date===t(s)))}),St(),Ct();var T=oe(),Y=i(T),M=i(Y,!0);a(Y);var k=n(Y,2);vt(k,1,()=>t($),ut,(v,f)=>{var U=re(),R=n(i(U),2),W=i(R);a(R),a(U),I(O=>z(W,`${O??""}:00 • ${t(f),x(()=>t(f).visitorName)??""}`),[()=>(t(f),x(()=>t(f).time.split(":")[0]))]),w(v,U)}),a(T),I(()=>{Ut(T,1,`aspect-square p-2 rounded-lg ${A()?"bg-[#142833] ring-2 ring-pirate-gold":"bg-[#142833]/50"} hover:bg-[#1A3240] text-pirate-parchment transition flex flex-col relative focus:outline-none focus:ring-2 focus:ring-pirate-gold/60`),z(M,g())}),B("click",T,function(...v){var f;(f=C())==null||f.apply(this,v)}),B("keydown",T,v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),C()())}),w(m,T),kt(),y()}const ne=()=>{const m=Pt;return{page:{subscribe:m.page.subscribe},navigating:{subscribe:m.navigating.subscribe},updated:m.updated}},se={subscribe(m){return ne().page.subscribe(m)}};var le=S('<span class="text-sm text-pirate-gold/60 ml-2">(Current)</span>'),de=S('<div class="aspect-square p-1 rounded-lg bg-[#142833]/20 text-pirate-parchment/30 flex items-center justify-center"><span>·</span></div>'),ce=S('<div class="flex items-center justify-between p-3 rounded-lg bg-[#142833]/50 hover:bg-[#1A3240] transition"><div><div class="text-pirate-parchment font-medium"> </div> <div class="text-sm text-pirate-parchment/70"> </div></div> <button class="rounded-lg p-2 bg-[#142833] hover:bg-[#1A3240] text-pirate-parchment transition"><svg class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></button></div>'),ve=S('<div class="text-center text-pirate-gold py-4 text-lg gothic-font tracking-wide">Your Lame is completely free today</div>'),ue=S('<div class="pirate-bg min-h-screen w-full text-[#E9E2D0] flex flex-col relative overflow-hidden svelte-1l40q67"><header class="px-8 pt-8 pb-4 text-center"><div class="flex justify-start mb-4"><button class="rounded-lg px-3 py-1 bg-[#142833] hover:bg-[#1A3240] text-pirate-parchment transition">← Back</button></div> <h1 class="text-5xl md:text-6xl font-bold text-pirate-gold tracking-wide gothic-font drop-shadow-[0_2px_0_rgba(0,0,0,0.6)] mb-8"> </h1></header> <div class="px-8 pb-8 flex-1"><div class="max-w-3xl mx-auto bg-[#0E1F29]/60 backdrop-blur-sm rounded-xl border border-[#1C2F3A] shadow-lg shadow-black/20"><div class="p-4 border-b border-[#1C2F3A] flex items-center justify-between"><button class="rounded-lg p-2 bg-[#142833] hover:bg-[#1A3240] text-pirate-parchment transition focus:outline-none focus:ring-2 focus:ring-pirate-gold/60" aria-label="Previous month"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></button> <h3 class="text-xl font-bold text-pirate-gold tracking-wide gothic-font"> <!></h3> <button class="rounded-lg p-2 bg-[#142833] hover:bg-[#1A3240] text-pirate-parchment transition focus:outline-none focus:ring-2 focus:ring-pirate-gold/60" aria-label="Next month"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div> <div class="p-4"><div class="grid grid-cols-7 gap-1 mb-2 text-center text-sm text-pirate-parchment/70"><div>Sun</div> <div>Mon</div> <div>Tue</div> <div>Wed</div> <div>Thu</div> <div>Fri</div> <div>Sat</div></div> <div class="grid grid-cols-7 gap-1"></div></div> <div class="p-4 border-t border-[#1C2F3A]"><h4 class="text-lg font-bold text-pirate-gold tracking-wide gothic-font mb-4">Upcoming Appointments</h4> <div class="space-y-3"></div></div></div></div></div> <!>',1);function ye(m,_){At(_,!1);const D=()=>ct(se,"$page",s),u=()=>ct(Ot,"$people",s),y=()=>ct(Q,"$appointments",s),[s,$]=Dt(),g=h(),p=h(),c=h(),A=h(),C=h(),E=h(),T=h();let Y=h(null);const M=new Date(2025,8,11);let k=h(new Date(2025,8,1)),v=h(!1),f=h(null);function U(e){d(f,new Date(t(p),t(c),e)),console.log("Selected date:",t(f),"year:",t(p),"month:",t(c),"day:",e),d(v,!0)}function R(e){return t(p)===M.getFullYear()&&t(c)===M.getMonth()&&e===M.getDate()}function W(){d(k,new Date(t(p),t(c)-1,1))}function O(){d(k,new Date(t(p),t(c)+1,1))}function xt(e,o){return new Date(e,o+1,0).getDate()}function _t(e,o){return new Date(e,o,1).getDay()}function yt(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function pt(e){const o=e.split(":")[0],b=((parseInt(o)+1)%24).toString().padStart(2,"0");return`${e} - ${b}:00`}N(()=>(D(),u()),()=>{if(D().url.searchParams.get("id")&&u().data){const e=D().url.searchParams.get("id");d(Y,u().data.find(o=>o.id===e)||null)}}),N(()=>t(k),()=>{d(p,t(k).getFullYear())}),N(()=>t(k),()=>{d(c,t(k).getMonth())}),N(()=>(t(p),t(c)),()=>{d(g,M.getFullYear()===t(p)&&M.getMonth()===t(c))}),N(()=>t(k),()=>{d(A,new Intl.DateTimeFormat("en-US",{month:"long"}).format(t(k)))}),N(()=>(t(p),t(c)),()=>{d(C,xt(t(p),t(c)))}),N(()=>(t(p),t(c)),()=>{d(E,_t(t(p),t(c)))}),N(()=>(t(E),t(C)),()=>{d(T,Array(42).fill(null).map((e,o)=>{const b=o-t(E)+1;return b>0&&b<=t(C)?b:null}))}),St(),Ct();var J=ue(),K=$t(J),at=i(K),P=i(at),gt=i(P);a(P);var rt=n(P,2),mt=i(rt);a(rt),a(at);var Z=n(at,2),tt=i(Z),ot=i(tt),ft=i(ot),it=n(ft,2),r=i(it),l=n(r);{var L=e=>{var o=le();w(e,o)};dt(l,e=>{t(g)&&e(L)})}a(it);var F=n(it,2);a(ot);var j=n(ot,2),q=n(i(j),2);vt(q,5,()=>t(T),ut,(e,o)=>{var b=jt(),et=$t(b);{var nt=V=>{{let st=Bt(()=>(t(o),x(()=>R(t(o)))));ie(V,{get day(){return t(o)},get year(){return t(p)},get month(){return t(c)},get isToday(){return t(st)},onClick:()=>U(t(o))})}},wt=V=>{var st=de();w(V,st)};dt(et,V=>{t(o)!==null?V(nt):V(wt,!1)})}w(e,b)}),a(q),a(j);var H=n(j,2),X=n(i(H),2);vt(X,5,()=>(y(),x(()=>[...y()].sort((e,o)=>e.date.localeCompare(o.date)||e.time.localeCompare(o.time)))),ut,(e,o)=>{var b=ce(),et=i(b),nt=i(et),wt=i(nt,!0);a(nt);var V=n(nt,2),st=i(V);a(V),a(et);var Ft=n(et,2);a(b),I((Nt,Tt)=>{z(wt,(t(o),x(()=>t(o).visitorName))),z(st,`${Nt??""} at ${Tt??""}`)},[()=>(t(o),x(()=>new Date(t(o).date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}))),()=>(t(o),x(()=>pt(t(o).time)))]),B("click",Ft,()=>{confirm(`Are you sure you want to remove ${t(o).visitorName}'s appointment?`)&&Q.remove(t(o).id)}),w(e,b)},e=>{var o=ve();w(e,o)}),a(X),a(H),a(tt),a(Z),a(K);var bt=n(K,2);ae(bt,{get open(){return t(v)},get selectedDate(){return t(f)},$$events:{close:()=>d(v,!1),save:({detail:{visitorName:e,time:o}})=>{if(!t(f))return;const b=yt(t(f));Q.add({date:b,visitorName:e,time:o})&&d(v,!1)}}}),I(()=>{z(mt,`My Lame ${t(Y),x(()=>{var e;return((e=t(Y))==null?void 0:e.name)||""})??""} Appointments`),z(r,`${t(A)??""} ${t(p)??""} `)}),B("click",gt,()=>Xt("/")),B("click",ft,W),B("click",F,O),w(m,J),kt(),$()}export{ye as component,_e as universal};
